(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{56:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._m(1),a("p",[t._v("Simply by declaring models like this is enough to get started, but you may want to read the following sections to learn how to customize their behavior.")]),t._m(2),t._m(3),t._m(4),a("p",[t._v("Here's an example combining different shapes:")]),t._m(5),a("p",[t._v("One example of creating a model that conforms with that definition is the following:")]),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),a("p",[t._v("Attribute accessors can also override reading a real attribute.")]),a("p",[t._v("For example, imagine that we have the following model:")]),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),a("p",[t._v("By default, any property that is used on a model instance that is not defined in the class declaration will be treated as an attribute. This is what allows code such as the following to work:")]),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),a("p",[t._v("The interpretation of what this string means will depend on the engine being used (it could be the name of a database collection or a url to a storage location).")]),a("p",[t._v("If this property is omitted, the name of the collection will be inferred from the model name. This means this property will be available at runtime whether you defined it or not.")]),t._m(28),t._m(29),t._m(30),a("p",[t._v("Relationships are a great way to work with referenced models.")]),a("p",[t._v("Conceptually, there are three types of relationships: One-to-one, One-to-many and Many-to-many. But this taxonomy can be limiting to declare relationships in non-relational databases. This is because documents can hold array fields, and the same relationship can be represented in multiple ways.")]),t._m(31),t._m(32),a("p",[t._v("For this reason, it's more useful to declare relationships in each model indicating how they reference each other. You can do it using the following 4 methods:")]),t._m(33),a("p",[t._v("The 3 scenarios we explored above would be declared as:")]),t._m(34),t._m(35),a("p",[t._v("Here's how you'd implement the first scenario:")]),t._m(36),t._m(37),a("p",[t._v("It's also possible to indicate what happens with related models upon deletion. For example, if you want to delete all the posts belonging to a user when they are removed:")]),t._m(38),a("p",[t._v("Learn how to use the relationships we just defined in the "),a("router-link",{attrs:{to:"/guide/using-models.html#working-with-relationships"}},[t._v("next section")]),t._v(".")],1),t._m(39),t._m(40),a("p",[t._v("Something else to keep in mind is to not use magic attributes within this initializer. Magic attributes are the ones that are not defined as class methods nor properties, but are available at runtime from fields and relationships. All these attributes can be manipulated using their respective methods instead.")]),t._m(41),t._m(42),t._m(43)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"defining-models"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#defining-models","aria-hidden":"true"}},[this._v("#")]),this._v(" Defining Models")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Database entities are called models, and their structure can be defined extending the "),s("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html",target:"_blank",rel:"noopener noreferrer"}},[this._v("Model")]),this._v(" class. You'll need to load them using "),s("a",{attrs:{href:"https://soukai.js.org/api/classes/reflection-45.soukai.html#loadmodel",target:"_blank",rel:"noopener noreferrer"}},[this._v("Soukai.loadModel")]),this._v(" or "),s("a",{attrs:{href:"https://soukai.js.org/api/classes/reflection-45.soukai.html#loadmodels",target:"_blank",rel:"noopener noreferrer"}},[this._v("Soukai.loadModels")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"fields"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fields","aria-hidden":"true"}},[this._v("#")]),this._v(" Fields")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The static attribute "),s("code",[this._v("fields")]),this._v(" can be defined in the model class to declare the format and expectations of model attributes. This attribute should be an object where keys are field names and values are field definitions. Field definitions can either be a "),s("a",{attrs:{href:"https://soukai.js.org/api/enums/models.fieldtype.html",target:"_blank",rel:"noopener noreferrer"}},[this._v("FieldType")]),this._v(" or a "),s("a",{attrs:{href:"https://soukai.js.org/api/interfaces/models.fielddefinition.html",target:"_blank",rel:"noopener noreferrer"}},[this._v("FieldDefinition")]),this._v(" with the following attributes:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th",[t._v("Attribute")]),a("th",[t._v("Type")]),a("th",[t._v("Default")]),a("th",[t._v("Description")])])]),a("tbody",[a("tr",[a("td",[t._v("type")]),a("td",[a("a",{attrs:{href:"https://soukai.js.org/api/enums/models.fieldtype.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("FieldType")])]),a("td",[a("code",[t._v("FieldType.Object")])]),a("td",[t._v("The expected format of the field. If this attribute is missing, the field will be assumed to be an object and attributes will be treated as field definitions instead (see the "),a("code",[t._v("field")]),t._v(" attribute on this table).")])]),a("tr",[a("td",[t._v("required")]),a("td",[a("code",[t._v("boolean")])]),a("td",[a("code",[t._v("false")])]),a("td",[t._v("Whether the field is required or not. Declaring a field as required may cause runtime errors if a model instance is created without them.")])]),a("tr",[a("td",[t._v("items")]),a("td",[a("a",{attrs:{href:"https://soukai.js.org/api/interfaces/models.fielddefinition.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("FieldDefinition")])]),a("td",[t._v("Required for array fields.")]),a("td",[t._v("Only supported for array fields. Declares the expected format of array items. The "),a("code",[t._v("required")]),t._v(" property in this definition is ignored.")])]),a("tr",[a("td",[t._v("fields")]),a("td",[a("a",{attrs:{href:"https://soukai.js.org/api/interfaces/models.fieldsdefinition.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("FieldsDefinition")])]),a("td",[t._v("Required for object fields.")]),a("td",[t._v("Only supported for object fields. Declares the expected format of attributes within the nested object.")])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Model"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" FieldType "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'soukai'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" fields "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        surname"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        birthDate"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Date"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        interests"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Array"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            items"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        contact"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            phone"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            email"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("User"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("create")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'John'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    surname"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'Doe'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    birthDate"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    interests"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'sports'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'reading'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    contact"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        phone"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'123456789'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        email"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'johndoe@example.com'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Using model definitions at runtime")]),a("p",[t._v("Once the model class has been loaded, the field definitions will be expanded to have all attributes defined in the long form. It is important to keep this in mind in case the "),a("code",[t._v("fields")]),t._v(" property is accessed at runtime, although that shouldn't be necessary in normal circumstances.")]),a("p",[t._v("The long form of our example above would be defined as such ("),a("code",[t._v("createdAt")]),t._v(" and "),a("code",[t._v("updatedAt")]),t._v(" fields are explained in the following section):")]),a("details",[a("summary",[t._v("Show / Hide example")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        required"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    surname"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        required"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    birthDate"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Date"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        required"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    interests"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Array"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        required"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        items"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    contact"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        required"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        fields"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            phone"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                required"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            email"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                required"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    createdAt"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Date"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        required"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    updatedAt"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Date"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        required"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"automatic-timestamps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#automatic-timestamps","aria-hidden":"true"}},[this._v("#")]),this._v(" Automatic timestamps")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Some model timestamps can be managed automatically. "),s("code",[this._v("createdAt")]),this._v(" will be set as the initial date when the model is created, and "),s("code",[this._v("updatedAt")]),this._v(" will be updated every time the model is modified.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("By default both timestamps are created and modified automatically, but the static attribute "),s("code",[this._v("timestamps")]),this._v(" can be declared to control this behavior. It can either be a boolean to enable or disable the mechanism as a whole, or an array of strings indicating which timestamps to enable.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("For example, if we only want the "),s("code",[this._v("createdAt")]),this._v(" attribute to be managed automatically:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Model "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'soukai'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" timestamps "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'createdAt'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("Using timestamps at runtime")]),s("p",[this._v("In the same way that fields definition is expanded when the model is loaded, this attribute will have its long form at runtime (an array of strings).")]),s("p",[this._v("Field definitions will also be added for the timestamps that are enabled.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"attribute-accessors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#attribute-accessors","aria-hidden":"true"}},[this._v("#")]),this._v(" Attribute accessors")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("In some scenarios it may be useful to create aliases or virtual attributes (attributes that are only available in the model instance and not persisted). They can be defined with an attribute accessor implemented by declaring a method with the name "),s("code",[this._v("get{attribute-name}Attribute")]),this._v(". Where "),s("code",[this._v("{attribute-name}")]),this._v(" is the name of the attribute starting with an uppercase letter.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" fields "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getNicknameAttribute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getAttribute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'name'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Instances of this model will respond to accessing to the "),s("code",[this._v("nickname")]),this._v(" property by invoking the attribute accessor:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'John Doe'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// This is true")]),t._v("\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" user"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nickname"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("⚠️ Defining an accessor does not create new attributes")]),s("p",[this._v("Keep in mind that doing this will only allow for such getters to be used, but the model will continue having the same attributes. This means that methods such as "),s("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html#getattribute",target:"_blank",rel:"noopener noreferrer"}},[this._v("getAttribute")]),this._v(" or "),s("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html#getattributes",target:"_blank",rel:"noopener noreferrer"}},[this._v("getAttributes")]),this._v(" will not take into account these virtual attributes. They will also be ignored in any interaction with engines.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"reserved-property-names"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reserved-property-names","aria-hidden":"true"}},[this._v("#")]),this._v(" Reserved property names")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// Model without fields definition")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nuser"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'John Doe'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v('// "name" will be an attribute in the model')]),t._v("\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getAttribute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'name'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("However, there are some reserved property names that won't be treated as attributes. All internal properties are prefixed with an underscore, for example "),s("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html#_attributes",target:"_blank",rel:"noopener noreferrer"}},[this._v("_attributes")]),this._v(" which holds an object with attribute values. As well as method names like "),s("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html#save",target:"_blank",rel:"noopener noreferrer"}},[this._v("save")]),this._v(" or "),s("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html#delete",target:"_blank",rel:"noopener noreferrer"}},[this._v("delete")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you have any property in your model that your don't want to be treated as an attribute, you can either give it an initial value in the class declaration or include it on the "),s("code",[this._v("classFields")]),this._v(" static property:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v('// Both "foo" and "bar" won\'t be treated as attributes')]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" classFields "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'foo'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    bar "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"collections"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#collections","aria-hidden":"true"}},[this._v("#")]),this._v(" Collections")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The static attribute "),s("code",[this._v("collection")]),this._v(" can be defined in the model class to indicate where models will be persisted. For example, the following model will be stored in the "),s("code",[this._v("users")]),this._v(" collection:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Model "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'soukai'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" collection "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'users'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Model name definition")]),a("p",[t._v("Since modern build systems don't guarantee a reliable mechanism to obtain a class names in javascript, the model name is provided explicitly when loading models using "),a("a",{attrs:{href:"https://soukai.js.org/api/classes/reflection-45.soukai.html#loadmodel",target:"_blank",rel:"noopener noreferrer"}},[t._v("Soukai.loadModel")]),t._v(" or "),a("a",{attrs:{href:"https://soukai.js.org/api/classes/reflection-45.soukai.html#loadmodels",target:"_blank",rel:"noopener noreferrer"}},[t._v("Soukai.loadModels")]),t._v(".")]),a("p",[t._v("If you are using webpack, the combination of "),a("a",{attrs:{href:"https://soukai.js.org/api/modules/utils.html#definitionsfromcontext",target:"_blank",rel:"noopener noreferrer"}},[t._v("definitionsFromContext")]),t._v(" and "),a("a",{attrs:{href:"https://soukai.js.org/api/classes/reflection-45.soukai.html#loadmodels",target:"_blank",rel:"noopener noreferrer"}},[t._v("Soukai.loadModels")]),t._v(" can do the work for you using the file name.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("⚠️ Model name inflection")]),s("p",[this._v("The current implementation of the name inflection is naive and should be improved. At the moment, the model name is only converted to lower case and appended an 's' character, so it shouldn't be trusted to do proper pluralization.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"relationships"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#relationships","aria-hidden":"true"}},[this._v("#")]),this._v(" Relationships")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("For example, imagine that you have a "),s("code",[this._v("Post")]),this._v(" model and a "),s("code",[this._v("User")]),this._v(" model. Conceptually, a user can write many posts and a post can have a single author (a user). This is a One-to-many relationship, one user (the author) to many posts. However, there are different ways of representing this relationship in the database:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("The post model could have an "),a("code",[t._v("authorId")]),t._v(" field.")]),a("li",[t._v("The user model could have a "),a("code",[t._v("postIds")]),t._v(" array field.")]),a("li",[t._v("Both "),a("code",[t._v("authorId")]),t._v(" and "),a("code",[t._v("postIds")]),t._v(" could be declared.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th"),a("th",[t._v("A model references")]),a("th",[t._v("A model is referenced by")])])]),a("tbody",[a("tr",[a("td",[a("strong",[t._v("One model")])]),a("td",[a("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html#belongstoone",target:"_blank",rel:"noopener noreferrer"}},[t._v("belongsToOne")])]),a("td",[a("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html#hasone",target:"_blank",rel:"noopener noreferrer"}},[t._v("hasOne")])])]),a("tr",[a("td",[a("strong",[t._v("Multiple models")])]),a("td",[a("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html#belongstomany",target:"_blank",rel:"noopener noreferrer"}},[t._v("belongsToMany")])]),a("td",[a("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html#hasmany",target:"_blank",rel:"noopener noreferrer"}},[t._v("hasMany")])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("A post belongs to one user and a user has many posts.")]),s("li",[this._v("A user belongs to many posts and a post has one user.")]),s("li",[this._v("All 4 relationships can be declared.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("These relations can be declared in a model defining a method with the relation name and the "),s("code",[this._v("Relationship")]),this._v(" suffix.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Post")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" fields "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        authorId"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Key"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token function"}},[t._v("authorRelationship")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("belongsToOne")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'authorId'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("postsRelationship")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("hasMany")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Post"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'authorId'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The arguments for these methods are the related model class, the foreign key name and the local key name. Key names can be inferred from model and primary key names. In the example above, the foreign key would have been inferred to be "),s("code",[this._v("userId")]),this._v(", but we had to declare it because it was "),s("code",[this._v("authorId")]),this._v(" instead. The local key is correctly inferred to "),s("code",[this._v("id")]),this._v(", the primary key of the User model.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("postsRelationship")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("hasMany")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Post"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'authorId'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("onDelete")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'cascade'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"a-word-about-constructors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-word-about-constructors","aria-hidden":"true"}},[this._v("#")]),this._v(" A word about constructors")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Because of internal implementation details, it is not recommended to have a constructor when defining a model class. Instead, you can override the "),s("a",{attrs:{href:"https://soukai.js.org/api/classes/models.model.html#initialize",target:"_blank",rel:"noopener noreferrer"}},[this._v("initialize")]),this._v(" method.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("❌ Wrong")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Post")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" fields "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        authorId"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Key"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attributes"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exists"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attributes"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exists"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'this will not work'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{attrs:{class:"token string"}},[t._v("'this will even throw an error'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("loadRelation")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'author'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token function"}},[t._v("authorRelationship")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("belongsToOne")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'authorId'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("✔️ Correct")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Post")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" fields "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        authorId"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FieldType"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Key"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("initialize")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attributes"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exists"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("initialize")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attributes"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exists"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'this is fine'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getAttribute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'title'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("loadRelation")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'author'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'this is also fine'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getRelationModels")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'author'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token function"}},[t._v("authorRelationship")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("belongsToOne")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'authorId'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you want to learn more about the internal implementation details, check out the source code of the "),s("a",{attrs:{href:"https://github.com/NoelDeMartin/soukai/tree/master/src/models/Model.ts",target:"_blank",rel:"noopener noreferrer"}},[this._v("Model")]),this._v(" class and learn how instances are initialized using Proxy.")])}],!1,null,null,null);s.default=e.exports}}]);